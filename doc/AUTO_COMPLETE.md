# Auto complete

> NOTE: command launcher can be compiled to any binary name. In the examples of all docs, "cl" is used as the binary name. See [CONFIG](./CONFIG.md) for more details.

One feature of command launcher is "setup auto-complete once, make it ready for all commands". You setup the auto-complete for command launcher in your shell. The CLI provider provides the auto-complete information in the package manifest file so that command launcher can handle the rest of auto-complete work.

## Setup auto-complete

You can setup auto-complete for command launcher by following the instructions specified in the built-in `completion` command:

```
cl completion [shell name] -h
```

Example: `cl completion bash -h`

## Declare auto-complete in your package manifest

### Auto-complete for argument

#### Static arguments

If your command has a static argument list, you can put them in the `validArgs` field:

```json
{
  "cmds": [
    {
      "name": "population",
      "type": "executable",
      "group": "city",
      "executable": "get-city-population",
      "args": [],
      "validArgs": [
        "paris",
        "rome",
        "london"
      ]
    }
  ]
}
```

When you type `cl city population [TAB] [TAB]`, you will see the options:
```
$ cl city population [TAB] [TAB]
paris  rome  london
```

#### Dynamic arguments

Dynamic arguments list is generated by calling the command defined in `validArgsCmd`. The output of the command must return each line a possible argument.

When command launcher call the validArgsCmd, it will pass the current flags and arguments of the main command to the validArgsCmd.

An example of the `validArgsCmd` command for dynamic arguments could be:

```json
{
  "cmds": [
    {
      "name": "population",
      "type": "executable",
      "group": "city",
      "executable": "get-city-population",
      "args": [],
      "validArgsCmd": [
        "{{.Root}}/bin/auto-complete.sh"
      ]
    }
  ]
}
```

An example of the auto-complete.sh file:
```bash
#!/usr/bin/env bash

if [ -z $1 ]; then
  echo "europe"
  echo "us"
  exit
fi

if [ "$1" == "europe" ]; then
  echo "paris"
  echo "rome"
  echo "london"
  exit
fi

if [ "$1" == "us" ]; then
  echo "new york"
  echo "los angeles"
  echo "boston"
  exit
fi
```

When you type `cl city population [TAB] [TAB]`, as the current 1st argument is empty, the validArgsCmd will return `europe` and `us`:
```
$ cl city population [TAB] [TAB]
europe  us
```

When you choose the first argument `us`, and type `TAB` `TAB`, the validArgsCmd is called again with the first argument `us` pass to it:
```
$ cl city population us [TAB] [TAB]
new york    los angeles    boston
```

### Auto-complete for flags

For flags, only static flags are supported for now.

You can put a list of static flags in the `requiredFlags` field, in the format of:

```
[long ]\t [short ]\t [description]
```

Or

```
[long ]\t [description]
```

For example:

```json
{
  "cmds": [
    {
      "name": "population",
      "type": "executable",
      "group": "city",
      "executable": "get-city-population",
      "args": [],
      "validArgs": [
        "paris",
        "rome",
        "london"
      ],
      "requiredFlags": [
        "human\t H\t return the human readable format",
      ]
    }
  ]
}
```

It declares a `--human` flags with a short form: `-H`


